<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property-Versatile - Weather</title>
    <link th:href="@{/css/styles.css}" rel="stylesheet" />
    <!-- Include jQuery library -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>

<body>

    <header>
        <h1>Property-Versatile</h1>
    </header>
    <nav>
        <a th:href="@{/index}">Home</a>
        <a th:href="@{/properties}">Properties</a>
        <a th:href="@{/leases}">Leases</a>
        <a th:href="@{/maintenance}">Maintenance Requests</a>
        <a th:href="@{/transactions}">Financial Transactions</a>
        <a th:href="@{/weather}">Weather</a>
        <a th:href="@{/engineers}">Engineers</a>
    </nav>

    <main>
        <div id="weather-container">
            <!-- Weather data will be displayed here -->
        </div>

        <script>
            // API URL
            var apiUrl = "https://api.open-meteo.com/v1/forecast?latitude=52.52&longitude=13.41&hourly=temperature_2m,relative_humidity_2m,precipitation_probability,snowfall,snow_depth,wind_speed_10m&timezone=Europe%2FLondon";

            // Fetch data from the API
            $.ajax({
                url: apiUrl,
                method: "GET",
                dataType: "json",
                success: function (data) {
                    // Process the retrieved data and update the HTML
                    displayWeatherData(data);
                },
                error: function (error) {
                    console.error("Error fetching weather data:", error);
                }
            });

            // Function to display weather data in the HTML
            function displayWeatherData(data) {
                // Access the relevant data from the API response
                var currentWeatherTime = data.current.time;
                var currentTemperature = data.current.temperature_2m;
                var currentWindSpeed = data.current.wind_speed_10m;

                // Create HTML content with the current weather data
                var currentWeatherHtml = `
                    <h2>Current Weather</h2>
                    <p>Time: ${currentWeatherTime}</p>
                    <p>Temperature: ${currentTemperature} Â°C</p>
                    <p>Wind Speed: ${currentWindSpeed} m/s</p>
                `;

                // Update the HTML in the weather-container
                $("#weather-container").html(currentWeatherHtml);
            }
        </script>
    </main>

    <footer>
        <p>&copy; 2023 Property-Versatile. All rights reserved.</p>
    </footer>

</body>

</html>
